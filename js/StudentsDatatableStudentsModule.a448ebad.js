(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["StudentsDatatableStudentsModule"],{"590a":function(e,t,a){"use strict";a.r(t);var s=a("99d9"),o=a("8fea"),i=a("71d9"),n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(s["c"],[t(o["a"],{staticClass:"elevation-1",attrs:{loading:e.stateLoadingItems,headers:e.filter__headers_datatable,items:e.itemsDatatable,options:e.optionsDatatable,"item-key":"id","show-select":"","sort-by":"created-at","sort-desc":"","no-data-text":"No hay datos disponibles","items-per-page":10,"mobile-breakpoint":700,"server-items-length":e.informationMeta.total,"footer-props":e.get_footer_props},on:{"update:options":function(t){e.optionsDatatable=t}},scopedSlots:e._u([{key:"top",fn:function(){return[t("resource-header-crud-title",{attrs:{"text-header":e.getTitleByStateAccount,"can-rendering-header":e.$vuetify.breakpoint.width<700}}),t(i["a"],{staticClass:"indigo lighten-5 my-2",attrs:{flat:"",outlined:""}},[t("resource-title-toolbar-datatable",{attrs:{"title-text":e.getTitleByStateAccount}})],1),t("resource-text-field-search",{ref:"ResourceTextFieldSearch",on:{emitSearchTextBinding:e.searchFieldWithDebounce,emitSearchWord:e.searchFieldExecuted}})]},proxy:!0},{key:"no-data",fn:function(){return[t("resource-banner-no-data-datatable")]},proxy:!0},{key:"item.actions-resource",fn:function({item:a}){return[t("div",{staticClass:"d-flex justify-space-around"},[t("resource-button-edit",{attrs:{"config-route":{},"only-dispatch-click-event":!0},on:{DispatchClickEvent:function(t){return e.setDataForUpdateUser(a)}}}),t("resource-button-delete",{attrs:{"text-button":"Dar de baja"},on:{actionConfirmShowDialogDelete:function(t){return e.deleteStudentConfirm(a)}}})],1)]}}],null,!0),model:{value:e.getSelectedItems,callback:function(t){e.getSelectedItems=t},expression:"getSelectedItems"}}),t("resource-dialog-confirm-delete",{ref:"dialogConfirmDeleteAction",attrs:{title:"¿Estás seguro de eliminar el alumno?"},on:{actionDelete:e.deleteStudentAction},scopedSlots:e._u([{key:"identifier-record",fn:function(){return[e.currentItemsSelectedForDelete?t("div",{staticClass:"d-flex justify-center align-center"},[t("span",{staticClass:"mr-1 font-italic subtitle-1"},[e._v("Alumno:")]),e._v(" "),t("span",{staticClass:"font-weight-bold subtitle-1"},[e._v(e._s(e.currentItemsSelectedForDelete["first-name"])+" "+e._s(e.currentItemsSelectedForDelete["last-name"]))])]):e._e()]},proxy:!0}])})],1)},r=[],l=a("2ef0"),c=a.n(l),u=a("34cf"),d={data(){return{headersDatatable:[{position:1,text:"DNI/NIE",align:"start",sortable:!0,value:"dni",show:!0},{position:2,text:"Nombre",align:"start",sortable:!0,value:"first-name",show:!0},{position:3,text:"Apellidos",align:"start",sortable:!0,value:"last-name",show:!0},{position:4,text:"Teléfono",align:"start",sortable:!0,value:"phone",show:!0},{position:5,text:"Email",align:"start",sortable:!0,value:"email",show:!0},{position:6,sortable:!0,text:"Fecha de alta",align:"center",value:"created-at",show:!0},{position:7,sortable:!1,text:"Acciones",align:"center",value:"actions-resource",show:!0}]}}},h=a("4c1e"),m=a("13df"),b={props:{stateAccount:{type:String,default:"enable"}}},p={components:{ResourceButtonEdit:()=>a.e("ResourceButtonEdit").then(a.bind(null,"edb5")),ResourceButtonDelete:()=>a.e("ResourceButtonDelete").then(a.bind(null,"6117e")),ResourceButtonAdd:()=>a.e("ResourceButtonAdd").then(a.bind(null,"8b24")),ResourceTextFieldSearch:()=>a.e("ResourceTextFieldSearch").then(a.bind(null,"74c7")),ResourceButtonGoBackRouter:()=>a.e("ResourceButtonGoBackRouter").then(a.bind(null,"5e64")),ResourceBannerNoDataDatatable:()=>a.e("ResourceBannerNoDataDatatable").then(a.bind(null,"121f")),ResourceTitleToolbarDatatable:()=>a.e("ResourceTitleToolbarDatatable").then(a.bind(null,"4d1a")),ResourceDividerTitleDatatable:()=>a.e("ResourceDividerTitleDatatable").then(a.bind(null,"95dc")),ResourceHeaderCrudTitle:()=>a.e("ResourceHeaderCrudTitle").then(a.bind(null,"0f24")),ResourceDialogConfirmDelete:()=>a.e("ResourceDialogConfirmDelete").then(a.bind(null,"a4e4"))}},f={data(){return{currentItemsSelectedForDelete:null}}},S=a("2f62"),D={methods:{...Object(S["b"])("studentsService",["getStudents","deleteStudent"]),...Object(S["d"])("studentsService",["SET_CURRENT_USER_FOR_UPDATE","SET_USERS_SELECTED_DATATABLE","SET_OPTIONS_DATATABLE_USERS","SET_MATCHES_RESET_OPTIONS_DATATABLE"]),loadDatatatable(){this.getStudents({params:this.getParamsUrlApi()})},setDataForUpdateUser(e){this.SET_CURRENT_USER_FOR_UPDATE({id:e.id,dni:e.dni,first_name:e["first-name"],last_name:e["last-name"],phone:e.phone,email:e.email}),this.$emit("emitScrollToCreateOrEditStudentForm")},fetchInitialData(){this.getStudents({params:this.getParamsUrlApi()})},getParamsUrlApi(){const e=this.buildQueryParamsRequest();return e["filter[role]"]="student",e["filter[state-account]"]=this.stateAccount,e},searchFieldExecuted(e){this.searchWord=e,this.getStudents({params:this.getParamsUrlApi()})},searchFieldWithDebounce(e){this.searchFieldExecuted(e)},deleteStudentConfirm(e){this.currentItemsSelectedForDelete=e,this.$swal.fire({toast:!0,width:"400px",icon:"question",title:"DAR DE BAJA",html:"<b>Esta acción es irreversible</b><br>¿Seguro que deseas eliminar este alumno y los datos relacionados a este?",showConfirmButton:!0,showCancelButton:!0,confirmButtonColor:"#007bff",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.deleteStudentAction()})}}},g={get_footer_props:function(){return{...this.get_items_per_page_options_datatable,showFirstLastPage:!0,firstIcon:"mdi-arrow-collapse-left",lastIcon:"mdi-arrow-collapse-right",prevIcon:"mdi-minus",nextIcon:"mdi-plus"}}},T={computed:{...Object(S["e"])("studentsService",["itemsDatatable","stateLoadingItems","informationMeta","usersSelected","matchesResetOptionsDatatable"]),...g,getTitleByStateAccount(){return"Gestión de Alumnos "+("enable"===this.stateAccount?"activos":"inactivos")},getSelectedItems:{get(){return this.usersSelected},set(e){this.SET_USERS_SELECTED_DATATABLE(e)}}}},_={watch:{optionsDatatable:{handler(){this.getStudents({params:this.getParamsUrlApi()})},deep:!0},matchesResetOptionsDatatable:{handler(){this.searchWord="",this.matchesResetOptionsDatatable&&(this.optionsDatatable={page:1,itemsPerPage:10,sortBy:["created-at"],sortDesc:[!0],groupBy:[],groupDesc:[],mustSort:!1,multiSort:!0},this.SET_MATCHES_RESET_OPTIONS_DATATABLE(!1))},deep:!0}}},E={methods:{async deleteStudentAction(){if(null!==this.currentItemsSelectedForDelete&&void 0!==this.currentItemsSelectedForDelete)try{await this.deleteStudent({id:this.currentItemsSelectedForDelete.id,config:{}}),this.$swal.fire({icon:"success",toast:!0,title:"El alumno ha sido eliminado con éxito.",timer:3e3}),this.$refs["ResourceTextFieldSearch"].searchWordText="",this.searchWord="",this.loadStudentsFromCurrentTab()}catch(e){}}}},A=a("82bb");const R=[b,p,f,D,E,T,_],x=[A["a"],m["a"],d,h["a"],u["a"]];var v={mixins:[...x,...R],created(){this.searchFieldWithDebounce=c.a.debounce(this.searchFieldWithDebounce,500)},mounted(){this.getStudents({params:this.getParamsUrlApi()})}},B=v,C=(a("9ab6"),a("2877")),w=Object(C["a"])(B,n,r,!1,null,"378dff9c",null);t["default"]=w.exports},"9ab6":function(e,t,a){"use strict";a("cccf")},cccf:function(e,t,a){}}]);